
## **DZ  Virtualization  - 3**


### ЗАДАЧА 1

[cсылка на docker hub](https://hub.docker.com/repository/docker/vasi4dev/fork-nginx/general)

### ЗАДАЧА 2

**1. высоконагруженное монолитное Java веб-приложение;**
<br>
полная апппаратная виртуализация. ввиду требований высоконагруженности:  экономия ресурсов  - не требуется ОС,  доступ к ресурсам у процессов - прямой, сокращение временных затрат на инициализацию и поддержку гостевых ОС (вместо настроек кучи хостовых ОС мы настраиваем только гипервизор), отвязка от аппаратной архитектуры ЦП физ. хоста. 

**2. Nodejs веб-приложение;**
<br>
смешанный подход. контейнеризация + физические хосты. 
Контейнеризация: frontend, backend, database.
приложение распилено на микросервисы. 
изолированная легковесная среда для разработки, тестирования и возможность быстрого масштабирования при росте нагрузки.
ускорение CI \ CD для автоматизации развёртки в разных окружениях. ускорение скоров разработки из-за меньшего объёма кода. 
Физ хосты: резервное копирование, хранение секретов, статический контент для сайта. 
физ. машины в несложной логической инфраструктуре дают преимущество в сокращении времени на инициализацию, сокращение объёма конфигов для них и на поддержку администрирования. меньший оверхед для общения по сети от них.


**3. мобильное приложение c версиями для Android и iOS;**
<br>

полная апппаратная виртуализация.
Наличие готовых инструментов для анализа производительности, отказоустойчивости, версионирования, потребления ресурсов.
шаблонизация настроек экземпляров ВМ для каждого пользователя. безопасность ресурсов хостовых машин. 
  

**4. шина данных на базе Apache Kafka;**
<br>
контейнеризация. шина данных используется в микросервисных архитектурах для передачи данных и для брокера сообщений между модулями.  
гетерогенность языков программирования ( при необходимости) даёт простор для гибкого кодирования взаимодействий шины с разными структурами данных, учитывая преимущества каждого языка (например, асинхронности). быстрое развёртывание тестировочных окружений для шины.

**5. Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;**

контейнеризация:
к каждому инструменту прикручивается шина данных и своё пространство имён. Logstash собирает логи, посылает их по шине данных в ElasticS, в нём стоит kibana, через которую мы смотрим логи. удобная отладка ввиду изоляции контекстов (можно понять, быстро понять, какой из контейнеров косячит и что-то вовремя не отдал \  не принял) , обеспечивание общения по http (не занимая ресурсы машин на обмен данными с шиной)   

**6. мониторинг-стек на базе Prometheus и Grafana;**

<br>
 полная аппаратная виртуализация +  физ сервера.
<br>
точный мониторинг системы в реальном времени крайне зависит от скорости доставки данных в prometheus. для этих целей для него нужна апппаратная виртуализация в силу своей стабильности гипервизора (можно взять XEN). также лёгкая миграция на другие машины без привязки к архитектуре ПК. высокая ресурсоизолированность, безопасность виртуализированных данных. Возможность жёстко определить выделяемые ресурсы ввиду небольшой нагрузки. но регулярной.
физ сервера можно использовать как долговременное, редкоиспользуемое, но крайне необходимое аварийное хранилище для бекапов и резервного копирования.



**7. MongoDB как основное хранилище данных для Java-приложения;**
физические машины:
основное хранилище данных как правило тщательно рассчитывается и не нуждается в резком реплицировании \ миграции чтобы избежать последствий отказа. следовательно - выигрыш в денежных затратах.
быстрое изолирование точечных проблем, не затрагивающее и не забивающее сеть (оверхед), отсутсвие потребности "выверять" ресурсы по управлению физ машинами по их стоимости для инфраструктуры в целом.
безопасность данных извне (минимум исходящего трафика в рамках аутентификации, выгрузке данных, некая хардкодность и постоянство переменных в  конфигах самих серверов)


**8. Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.**
<br>
смешанный. <br>
контейнеризация + физ сервера .
Контейнеризация для CI / CD. шина данных, изоляция зависимостей для различных  этапов пайплайна -  сборки и доставки ПО. оперативное горизонтальное масштабирование ресурсов. скорость разворачивания тестировочных окружений. 

Физ сервера для Docker Registry.
Образы приложений должны храниться в stateless системе, коей и является Registry. Можно было бы его добавить как контейнер, но тогда на инженеров ложится дополнительные усилия по контролю за зависимостями контейнеров Registry и остальных инструментов CI / CD. также надо создавать доп иерархию  и самое главное - обеспечивать доп безопасность для всех Docker хостов с  Docker Registry . в случае с физическими машинами дополнительных абстракций нет. про местонахождение, устройство и доступность Registry всегда знают все вовлеченные в это части приложения как о постоянно выделенных и сконфигурированных для этого машинах со своей безопасностью  и конфигурацией. соотв, снижается время отклика. 


### ЗАДАЧА 3

docker ps
![docker ps](https://github.com/vasi4-dev/devops-netology/blob/main/snips_dz/docker_ps.PNG?raw=true)

добавление файла
![добавление файла](https://github.com/vasi4-dev/devops-netology/blob/main/snips_dz/1st_screesnhot.PNG?raw=true)

просмотр файлов во 2 контейнере
![просмотр файлов во 2 контейнере](https://github.com/vasi4-dev/devops-netology/blob/main/snips_dz/2nd_container.PNG?raw=true)


### ЗАДАЧА 4  

[ссылка на docker hub](https://hub.docker.com/layers/vasi4dev/fork-nginx/1.0/images/sha256-c9aeb82cb8d519662ab14145cf260a1f14c359f4e676a186b8ca18d700e6b257?context=repo)